<div><panel src="/se-book/modeling/modelingBehaviors/sequenceDiagramsIntermediate/unit-inElsewhere-asFlat._include_.html" popup-url="/se-book/modeling/modelingBehaviors/sequenceDiagramsIntermediate"><template #header><p><span class="dimmed"><span><span aria-hidden="true" class="glyphicon glyphicon-education"></span></span> Design → Modeling → Modeling Behaviors → Sequence Diagrams → Intermediate</span></p></template></panel></div><p></p>
<p><span class="dimmed"><strong><span>Design → Modeling → Modeling a Solution →
</span></strong></span></p>
<div id="title-and-body">
<div><h4 id="intermediate"><span id="intermediate" class="anchor"></span><span>Intermediate</span><a class="fa fa-anchor" href="#intermediate" onclick="event.stopPropagation()"></a></h4></div>
<div id="main">
<div>
<p>Continuing with the example in [<trigger trigger="click" for="modal:conceptualingIntermediate-basic">Design → Modeling → Modeling a Solution → Basic</trigger>], next let us model how the <code class="hljs inline no-lang" v-pre>TextUi</code> interacts with the <code class="hljs inline no-lang" v-pre>Logic</code> to support the mark and clear operations until the game is won or lost.</p>
<modal large id="modal:conceptualingIntermediate-basic"><template #header></template>
  <div><div><panel src="/se-book/modeling/modelingBehaviors/sequenceDiagramsBasic/unit-inElsewhere-asFlat._include_.html" popup-url="/se-book/modeling/modelingBehaviors/sequenceDiagramsBasic"><template #header><p><span class="dimmed"><span><span aria-hidden="true" class="glyphicon glyphicon-education"></span></span> Design → Modeling → Modeling Behaviors → Sequence Diagrams → Basic</span></p></template></panel></div><p></p>
<p><span class="dimmed"><strong><span>Design → Modeling → Modeling a Solution →
</span></strong></span></p>
<div id="title-and-body">
<div><h4 id="basic"><span id="basic" class="anchor"></span><span>Basic</span><a class="fa fa-anchor" href="#basic" onclick="event.stopPropagation()"></a></h4></div>
<div id="main">
<div>
<p>As mentioned in [<trigger trigger="click" for="modal:basicModelling-modelingIntro">Design → Modeling → Modeling a Solution → Introduction</trigger>], this is the Minesweeper design you have come up with so far. Our objective is to analyze, evaluate, and refine that design.</p>
<modal large id="modal:basicModelling-modelingIntro"><template #header>Textbook <span><span aria-hidden="true" class="glyphicon glyphicon-log-in"></span></span></template>
  <div><div></div><p></p>
<p><span class="dimmed"><strong><span>Design → Modeling → Modeling a Solution →
</span></strong></span></p>
<div id="title-and-body">
<div><h4 id="introduction"><span id="introduction" class="anchor"></span><span>Introduction</span><a class="fa fa-anchor" href="#introduction" onclick="event.stopPropagation()"></a></h4></div>
<div id="main">
<div>
<p><strong>You can use models to analyze and design software before you start coding.</strong></p>
<p>Suppose you are planning to implement a simple minesweeper game that has a text based UI and a GUI. Given below is a possible OOP design for the game.</p>
<img src="/se-book/modeling/modelingASolution/introduction/images/textLogicMinefieldCell.png" height="50">
<p></p>
<p>Before jumping into coding, you may want to find out things such as,</p>
<ul>
<li>Is this class structure able to produce the behavior you want?</li>
<li>What API should each class have?</li>
<li>Do you need more classes?</li></ul>
<p>To answer these questions, you can analyze how the objects of these classes will interact with each other to produce the behavior you want.</p></div>
<div></div></div></div></div></modal>
<img src="/se-book/modeling/modelingASolution/introduction/images/textLogicMinefieldCell.png" height="50">
<p></p>
<p>Let us start by modeling a sample interaction between the person playing the game and the <code class="hljs inline no-lang" v-pre>TextUi</code> object.</p>
<box>
<img src="/se-book/modeling/modelingASolution/basic/images/playerText.png" height="300">
<p></p>
<p><code class="hljs inline no-lang" v-pre>newgame</code> and <code class="hljs inline no-lang" v-pre>clear x y</code> represent commands typed by the <code class="hljs inline no-lang" v-pre>Player</code> on the <code class="hljs inline no-lang" v-pre>TextUi</code>.</p></box>
<p>How does the <code class="hljs inline no-lang" v-pre>TextUi</code> object carry out the requests it has received from the player? It would need to interact with other objects of the system. Because the <code class="hljs inline no-lang" v-pre>Logic</code> class is the one that controls the game logic, the <code class="hljs inline no-lang" v-pre>TextUi</code> needs to collaborate with <code class="hljs inline no-lang" v-pre>Logic</code> to fulfill the <code class="hljs inline no-lang" v-pre>newgame</code> request. Let us extend the model to capture that interaction.</p>
<box>
<img src="/se-book/modeling/modelingASolution/basic/images/playerTextLogic.png" height="280">
<p></p>
<p><code class="hljs inline no-lang" v-pre>W</code> = Width of the minefield; <code class="hljs inline no-lang" v-pre>H</code> =  Height of the minefield</p></box>
<p>The above diagram assumes that <code class="hljs inline no-lang" v-pre>W</code> and <code class="hljs inline no-lang" v-pre>H</code> are the only information <code class="hljs inline no-lang" v-pre>TextUi</code> requires to display the minefield to the <code class="hljs inline no-lang" v-pre>Player</code>. Note that there could be other ways of doing this.</p>
<p>The <code class="hljs inline no-lang" v-pre>Logic</code> methods you conceptualized in our modeling so far are:</p>
<box>
<img src="/se-book/modeling/modelingASolution/basic/images/textLogicMinefieldCell.png" height="115"></box>
<p>Now, let us look at what other objects and interactions are needed to support the <code class="hljs inline no-lang" v-pre>newGame()</code> operation.  It is likely that a new <code class="hljs inline no-lang" v-pre>Minefield</code> object is created when the <code class="hljs inline no-lang" v-pre>newGame()</code> method is called.</p>
<box>
<img src="/se-book/modeling/modelingASolution/basic/images/logicMinefield.png" height="150"></box>
<p>Note that the behavior of the <code class="hljs inline no-lang" v-pre>Minefield</code> constructor has been abstracted away. It can be designed at a later stage.</p>
<p>Given below are the interactions between the player and the <code class="hljs inline no-lang" v-pre>TextUi</code> for the whole game.</p>
<box>
<img src="/se-book/modeling/modelingASolution/basic/images/playerTextLoop.png" height="300">
<p></p></box><p>
<box>
<p><span class="badge rounded-pill bg-warning text-dark"><span aria-hidden="true" class="fas fa-lightbulb"></span></span> Note that <tooltip><template #content>using sequence diagrams</template>a similar technique</tooltip> can be used when discovering/defining the architecture-level APIs.</p>
<div v-closeable alt="Tic-Tac-Toe Video" class="non-printable">
<p><span><span aria-hidden="true" class="glyphicon glyphicon-facetime-video"></span></span> Defining the architecture-level APIs for a small Tic-Tac-Toe game:</p>
<div class="block-embed block-embed-service-youtube" style="position: relative; padding-bottom: 60.9375%"><iframe type="text/html" src="//www.youtube.com/embed/Un80XoRT1ME" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div></div></box></p></div>
<div></div></div></div></div></modal>
<box>
<img src="/se-book/modeling/modelingASolution/intermediate/images/playerTextLogicRef.png" height="250">
<p></p>
<img src="/se-book/modeling/modelingASolution/intermediate/images/textLogicSd.png" height="210"></box>
<p>This interaction adds the following methods to the <code class="hljs inline no-lang" v-pre>Logic</code> class:</p>
<ul>
<li><code class="hljs inline no-lang" v-pre>clearCellAt(int x, int y)</code></li>
<li><code class="hljs inline no-lang" v-pre>markCellAt(int x, int y)</code></li>
<li><code class="hljs inline no-lang" v-pre>getGameState(): GAME_STATE (GAME_STATE: READY, IN_PLAY, WON, LOST, …)</code></li></ul>
<p>And it adds the following operation to Logic API:</p>
<ul>
<li><code class="hljs inline no-lang" v-pre>getAppearanceOfCellAt(int,int): CELL_APPEARANCE (CELL_APPEARANCE: HIDDEN, ZERO, ONE, TWO, THREE, …, MARKED, INCORRECTLY_MARKED, INCORRECTLY_CLEARED)</code></li></ul>
<p>In the above design, <code class="hljs inline no-lang" v-pre>TextUi</code> does not access <code class="hljs inline no-lang" v-pre>Cell</code> objects directly. Instead, it gets values of type <code class="hljs inline no-lang" v-pre>CELL_APPEARANCE</code> from <code class="hljs inline no-lang" v-pre>Logic</code> to be displayed as a minefield to the player. Alternatively, each cell or the entire minefield can be passed directly to <code class="hljs inline no-lang" v-pre>TextUi</code>.</p>
<p>Here is the updated class diagram:</p>
<box>
<img src="/se-book/modeling/modelingASolution/intermediate/images/textLogicMinefieldCell.png" height="200"></box>
<p>The above is for the case when Actor <code class="hljs inline no-lang" v-pre>Player</code> interacts with the system using a text UI. Additional operations (if any) required for the GUI can be discovered similarly.
Suppose <code class="hljs inline no-lang" v-pre>Logic</code> supports a <code class="hljs inline no-lang" v-pre>reset()</code> operation. You can model it like this:</p>
<box>
<img src="/se-book/modeling/modelingASolution/intermediate/images/logicMinefieldReset.png" height="100"></box>
<p>Our current model assumes that the <code class="hljs inline no-lang" v-pre>Minefield</code> object has enough information (i.e. H, W, and mine locations) to create itself.</p>
<box>
<img src="/se-book/modeling/modelingASolution/intermediate/images/logicMinefieldNewGame.png" height="85">
<p></p></box>
<p>An alternative is to have a <code class="hljs inline no-lang" v-pre>ConfigGenerator</code> object that generates a string containing the minefield information as shown below.</p>
<box>
<img src="/se-book/modeling/modelingASolution/intermediate/images/logicConfigGenerator.png" height="170">
<p></p></box>
<p>In addition, <code class="hljs inline no-lang" v-pre>getWidth()</code>, <code class="hljs inline no-lang" v-pre>getHeight()</code>, <code class="hljs inline no-lang" v-pre>markCellAt(x,y)</code> and <code class="hljs inline no-lang" v-pre>clearCellAt(x,y)</code> can be handled like this.</p>
<box>
<img src="/se-book/modeling/modelingASolution/intermediate/images/logicMinefieldFunctions.png" height="180"></box>
<p>The updated class diagram:</p>
<box>
<img src="/se-book/modeling/modelingASolution/intermediate/images/textLogicMinefieldCellConfigGenerator.png" height="250"></box>
<p>How is the <code class="hljs inline no-lang" v-pre>getGameState()</code> operation supported? Given below are two ways (there could be other ways):</p>
<ol>
<li>The <code class="hljs inline no-lang" v-pre>Minefield</code> class knows the state of the game at any time. The <code class="hljs inline no-lang" v-pre>Logic</code> class retrieves it from the <code class="hljs inline no-lang" v-pre>Minefield</code> class as and when required.</li>
<li>The <code class="hljs inline no-lang" v-pre>Logic</code> class maintains the state of the game at all times.</li></ol>
<p>Here’s the SD for option 1.</p>
<box>
<img src="/se-book/modeling/modelingASolution/intermediate/images/logicMinefieldGetGameState.png" height="180"></box>
<p>Here’s the SD for option 2. Assume that the game state is updated after every mark/clear action.</p>
<box>
<img src="/se-book/modeling/modelingASolution/intermediate/images/logicMinefieldUpdateState.png" height="250"></box>
<p>It is now time to explore what happens inside the <code class="hljs inline no-lang" v-pre>Minefield</code> constructor. One way is to design it as follows.</p>
<box>
<img src="/se-book/modeling/modelingASolution/intermediate/images/minefieldCellAlt.png" height="200"></box>
<p>Now let us assume that <code class="hljs inline no-lang" v-pre>Minesweeper</code> supports a ‘timing’ feature.</p>
<box>
<img src="/se-book/modeling/modelingASolution/intermediate/images/logicTimerOpt.png" height="130"></box>
<p>Updated class diagram:</p>
<box>
<img src="/se-book/modeling/modelingASolution/intermediate/images/fullClassDiagram.png" height="250"></box>
<box>
<p><span class="badge rounded-pill bg-warning text-dark"><span aria-hidden="true" class="fas fa-lightbulb"></span></span> When designing components, it is not necessary to draw elaborate UML diagrams capturing all details of the design. They can be done as rough sketches. For example, draw sequence diagrams only when you are not sure which operations are required by each class, or when you want to verify that your class structure can indeed support the required operations.</p></box></div>
<div></div></div></div>