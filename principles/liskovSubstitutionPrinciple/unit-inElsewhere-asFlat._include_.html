<div></div>
<p></p>
<p><span class="dimmed"><strong><span>Supplmentary → Principles →
</span></strong>
  </span>
</p>
<div id="title-and-body">
  <div>
    <h4 id="liskov-substitution-principle">Liskov Substitution Principle</h4>
  </div>
  <div id="main">
    <div>
      <tip-box type="definition">
        <div>
          <p><strong>Liskov Substitution Principle (LSP)</strong>: Derived classes must be substitutable for their base classes. <sub>-- proposed by <a href="https://en.wikipedia.org/wiki/Barbara_Liskov">Barbara Liskov</a></sub></p>
        </div>
      </tip-box>
      <p>LSP sounds same as
        <trigger large="" trigger="click" for="modal:lsp-substitutability">substitutability</trigger> but it goes beyond substitutability; <strong>LSP implies that a subclass should not be more restrictive than the behavior specified by the superclass.</strong> As we know, Java has language support for substitutability.
        However, if LSP is not followed, substituting a subclass object for a superclass object can break the functionality of the code.</p>
      <modal large="" title="Textbook <span class='glyphicon glyphicon-log-in' aria-hidden='true'></span>" id="modal:lsp-substitutability">
      
        <div>
          <div>
            <p>
              <panel src="/se-book\oop\inheritance\what\unit-inElsewhere-asFlat._include_.html" header="%%<span class='glyphicon glyphicon-education' aria-hidden='true'></span> Paradigms → Object Oriented Programming → Inheritance → What%%"></panel>
            </p>
          </div>
          <p></p>
          <p><span class="dimmed"><strong><span>Paradigms → Object Oriented Programming → Inheritance →
</span></strong>
            </span>
          </p>
          <div id="title-and-body">
            <div>
              <h4 id="substitutability">Substitutability</h4>
            </div>
            <div id="main">
              <div>
                <p><strong>Every instance of a subclass is an instance of the superclass, but not vice-versa.</strong> As a result, inheritance allows <em>substitutability</em> : the ability to substitute a child class object where a parent class object
                  is expected.</p>
                <tip-box>
                  <img src="/se-book/oop/inheritance/substitutability/images/staff.png" height="80">
                  <p></p>
                  <p><span class="fas fa-cube"></span> an <code>Academic</code> is an instance of a <code>Staff</code>, but a <code>Staff</code> is not necessarily an instance of an <code>Academic</code>. i.e. wherever an object of the superclass is expected,
                    it can be substituted by an object of any of its subclasses.</p>
                  <p>The following code is valid because an <code>AcademicStaff</code> object is substitutable as a <code>Staff</code> object.</p>
                  <pre><code class="hljs java">Staff staff = <span class="hljs-keyword">new</span> AcademicStaff (); <span class="hljs-comment">// OK</span>
</code></pre>
                  <p>But the following code is not valid <span class="dimmed"> because <code>staff</code> is declared as a <code>Staff</code> type and therefore its value may or may not be of  type <code>AcademicStaff</code>, which is the type expected by variable <code>academicStaff</code>.</span></p>
                  <pre><code class="hljs java">Staff staff;
...
AcademicStaff academicStaff = staff; <span class="hljs-comment">// Not OK</span>
</code></pre>
                </tip-box>
              </div>
              <div></div>
            </div>
          </div>
        </div>
      </modal>
      <tip-box>
        <p><span class="fas fa-cube"></span> Suppose the <code>Payroll</code> class depends on the <code>adjustMySalary(int percent)</code> method of the <code>Staff</code> class. Furthermore, the <code>Staff</code> class states that the <code>adjustMySalary</code>          method will work for all positive percent values. Both <code>Admin</code> and <code>Academic</code> classes override the <code>adjustMySalary</code> method.</p>
        <img src="/se-book/principles/liskovSubstitutionPrinciple/images/payroll.png" height="200">
        <p></p>
        <p>Now consider the following:</p>
        <ul>
          <li><code>Admin#adjustMySalary</code> method works for both negative and positive percent values.</li>
          <li><code>Academic#adjustMySalary</code> method works for percent values <code>1..100</code> only.</li>
        </ul>
        <p>In the above scenario,</p>
        <ul>
          <li><code>Admin</code> class follows LSP because it fulfills <code>Payroll</code>’s expectation of <code>Staff</code> objects (i.e. it works for all positive values). Substituting <code>Admin</code> objects for Staff objects will not break the <code>Payroll</code>            class functionality.</li>
          <li><code>Academic</code> class violates LSP because it will not work for percent values over <code>100</code> as expected by the <code>Payroll</code> class. Substituting <code>Academic</code> objects for <code>Staff</code> objects can potentially
            break the <code>Payroll</code> class functionality.</li>
        </ul>
        <panel type="seamless" header="%%Another example%%">
          <p><span class="fas fa-cube"></span> The <code>Rectangle#resize()</code> can take any integers for <code>height</code> and <code>width</code>. This contract is violated by the subclass <code>Square#resize()</code> because it does not accept a <code>height</code>            that is different from the <code>width</code>.</p>
          <img src="/se-book/principles/liskovSubstitutionPrinciple/images/rectangleSquare.png" height="120">
          <p></p>
          <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> </span>{
    ...
    <span class="hljs-comment">/** sets the size to given height and width*/</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">resize</span><span class="hljs-params">(<span class="hljs-keyword">int</span> height, <span class="hljs-keyword">int</span> width)</span></span>{
        ...
    }
}


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Square</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Rectangle</span> </span>{
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">resize</span><span class="hljs-params">(<span class="hljs-keyword">int</span> height, <span class="hljs-keyword">int</span> width)</span></span>{
        <span class="hljs-keyword">if</span> (height != width) {
            <span class="hljs-comment">//error</span>
       }
    }
}
</code></pre>
          <p>Now consider the following method that is written to work with the <code>Rectangle</code> class.</p>
          <pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">makeSameSize</span><span class="hljs-params">(Rectangle original, Rectangle toResize)</span></span>{
    toResize.resize(original.getHeight(), original.getWidth());
}
</code></pre>
          <p>This code will fail if it is called as <code>maekSameSize(new Rectangle(12,8), new Square(4, 4))</code> That is, <code>Square</code> class is not substitutable for the <code>Rectangle</code> class.</p>
        </panel>
      </tip-box>
    </div>
    <div>
      <div>
        <panel header="<span class='fas fa-dumbbell'></span> Exercises" expandable="">
          <div>
            <panel header="<span class='glyphicon glyphicon-question-sign' aria-hidden='true'></span><span class='glyphicon glyphicon-ok-sign' aria-hidden='true'></span> Is this LSP?">
              <question>
                <p>If a subclass imposes more restrictive conditions than its parent class, it violates Liskov Substitution Principle.</p>
                <ul radio-group="55ada" class="radio-list">
                  <li class="radio-list-item"><label><input class="radio-list-input" name="55ada" type="radio"> True</label></li>
                  <li class="radio-list-item"><label><input class="radio-list-input" name="55ada" type="radio"> False</label></li>
                </ul>
                <div slot="answer">
                  <p>True.</p>
                  <p>Explanation: If the subclass is more restrictive than the parent class, code that worked with the parent class may not work with the child class. Hence, the substitutability does not exist and LSP has been violated.</p>
                </div>
              </question>
            </panel>
          </div>
        </panel>
      </div>
    </div>
  </div>
</div>