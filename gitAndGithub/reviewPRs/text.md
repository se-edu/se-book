{% from "common/macros.njk" import trail, bold_number, button_green, button_light, callout, dropdown, hp_number, label, show_commit, show_folder_columns, show_git_term, show_git_term_tip, show_detour, show_exercise, show_git_tabs, show_git_tabs_from_text, show_hands_on_practical, show_head, show_lesson_intro, show_lesson_link, show_output, show_protip, show_ref, show_resources, show_sidebar, show_tag, show_transformation_columns, show_troubleshooting, show_under_the_hood, sub_numbers with context %}

<span id="title">Reviewing PRs</span>
<span id="prereqs"></span>
<span id="outcomes">{{ icon_outcome }} Can review PRs on GitHub</span>

<div id="body">

**PR reviews are a collaborative process in which project members examine and provide feedback on PRs submitted to a remote repo.** After an initial review, the reviewer may suggest improvements or identify issues, prompting the submitter to refine and update their code in the PR. This review-refine-update cycle can repeat several times, with reviewers reassessing each new iteration until all feedback is addressed and the code meets the teamâ€™s expectations. Once approved, the PR can be merged, making the changes an official part of the codebase.

<!-- ================== start: HANDS-ON =========================== -->
{% call show_hands_on_practical("Review a PR")  %}

{{ hp_number("Preparation") }} If you do not have access to a PR that you can review, you can create one for yourself as follows:

* Create a branch in a repo that you have forked and cloned (e.g., [samplerepo-pr-practice](https://github.com/se-edu/samplerepo-pr-practice)). {{ numbers_roman }}
* Do some changes in the branch.
* Push the branch to the remote repo.
* Create a PR within your fork, from the new branch to the `master` branch.



{{ hp_number("1") }} **Locate the PR:**
* Go to the GitHub page of the repo. {{ sub_numbers('1') }}
* Click on the <span class="tab">{{ icon_pr }} Pull requests</span> tab.
* Click on the PR you want to review.

{{ hp_number("2") }}**Read the PR description.** It might contain information relevant to reviewing the PR.

{{ hp_number("3") }}**Click on the** <span class="tab">:octicon-diff: Files changed</span> tab to see the _diff_ view.

<div class="indented-level1" id="tip-pr-split-view">

{{ icon_tip }} You can use the following setting to try the two different views available and pick the one you like.<br>
<pic src="images/splitVsUnifiedDiffView.png"/>
</div>


{{ hp_number("4") }}**Add review comments:**

* Hover over the line you want to comment on and click on the <span style="color:#0066ff">:fas-plus-square:</span> icon that appears on the left margin. That should create a text box for you to enter your comment. {{ sub_numbers('4') }}
   * {{ icon_tip }} To give a comment related to multiple lines, click-and-drag the <span style="color:#0066ff">:fas-plus-square:</span> icon. The result will look like this:<br>
     <pic eager src="images/addCommentForMultipleLines.png"/>
* Enter your comment.<br>
   * {{ icon_resource }} [This page @SE-EDU/guides](https://se-education.org/guides/guidelines/PRs-reviewing.html) has some best practices PR reviewers can follow.
   * {{ icon_tip }} To suggest an in-line code change, click on this icon:<br>
     <pic eager src="images/giveInlineSuggestion.png"/><br>
     After that, you can proceed to edit the `suggestion` code block generated by GitHub (as seen in the screenshot above).<br>
     The comment will look like this to the viewers:<br>
     <pic eager src="images/giveInlineSuggestionPreview.png"/><br>
* After typing in the comment, click on the {{ button_green("Start a review") }} button (not the {{ button_light("Add single comment") }} button. This way, your comment is saved but not visible to others yet. It will be visible to others only when you have finished the entire review.<br>
   <pic eager src="images/addComment.png" width="800" />
   <p/>
* Repeat the above steps to add more comments.

{{ hp_number("5") }}**Submit the review:**<br>
   <pic eager src="images/submitReview.png" width="500" />
   <p/>

* When there are no more comments to add, click on the {{ button_green("Review changes :octicon-triangle-down:") }} button (on the top right of the diff page). {{ sub_numbers('5') }}
* Type in an overall comment about the PR, if any. e.g.,
   ```{.no-line-numbers}
   Overall, I found your code easy to read for the most part except a few places
   where the nesting was too deep. I noted a few minor coding standard violations
   too. Some of the classes are getting quite long. Consider splitting into
   smaller classes if that makes sense.
   ```
   {{ icon_tip }} `LGTM` is often used in such overall comments, to indicate `Looks good to me` (or `Looks good to merge`).<br>
   `nit` (as in _nit-picking_) is another such term, used to indicate minor flaws e.g., `LGTM. Just a few nits to fix.`.
* Choose `Approve`, `Comment`, or `Request changes` option as appropriate and click on the {{ button_green("Submit review") }} button.

{% endcall %}<!-- ===== end: HANDS-ON ============================ -->
</div>

<div id="extras">

{% call show_resources()  %}
* [GitHub help on how to review PRs](https://help.github.com/en/articles/about-pull-request-reviews)
* [_Best practices for reviewing PRs_ @SE-EDU/guides](https://se-education.org/guides/guidelines/PRs-reviewing.html).
{% endcall %}
</div>
