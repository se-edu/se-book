<p><span class="dimmed"><strong><span>Tools → Git and GitHub →
</span></strong></span></p>
<div id="title-and-body">
<div><h4 id="forking-workflow"><span>Forking workflow</span><a class="fa fa-anchor" href="#forking-workflow" onclick="event.stopPropagation()"></a></h4></div>
<div id="main">
<div>
<pic src="/se-book/gitAndGithub/forkingWorkflow/images/diagram.png" height="330"></pic>
<p></p>
<p><strong>In the <em>forking workflow</em>, the 'official' version of the software is kept in a remote repo designated as the 'main repo'. All team members fork the main repo and create pull requests from their fork to the main repo.</strong></p>
<p>To illustrate how the workflow goes, let’s assume Jean wants to fix a bug in the code. Here are the steps:</p>
<ol>
<li>Jean creates a separate branch in her local repo and fixes the bug in that branch.<br>
<span style="color: red"><span class="large"><span><span aria-hidden="true" class="glyphicon glyphicon-exclamation-sign"></span></span></span></span> Common mistake: Doing the proposed changes in the <code class="hljs inline no-lang" v-pre>master</code> branch -- if Jean does that, she will not be able to have more than one PR open at any time because any changes to the <code class="hljs inline no-lang" v-pre>master</code> branch will be reflected in all open PRs.</li>
<li>Jean pushes the branch to her fork.</li>
<li>Jean creates a pull request from that branch in her fork to the main repo.</li>
<li>Other members review Jean’s pull request.</li>
<li>If reviewers suggested any changes, Jean updates the PR accordingly.</li>
<li>When reviewers are satisfied with the PR, one of the members (usually the team lead or a designated 'maintainer' of the main repo) merges the PR, which brings Jean’s code to the main repo.</li>
<li>Other members, realizing there is new code in the upstream repo, sync their forks with the new upstream repo (i.e., the main repo). This is done by pulling the new code to their own local repo and pushing the updated code to their own fork. If there are unmerged branches in the local repo, they can be updated too e.g., by merging the new <code class="hljs inline no-lang" v-pre>master</code> branch to each of them.<br>
<span style="color: red"><span class="large"><span><span aria-hidden="true" class="glyphicon glyphicon-exclamation-sign"></span></span></span></span> Possible mistake: Creating another 'reverse' PR from the team repo to the team member's fork to sync the member's fork with the merged code. PRs are meant to go from downstream repos to upstream repos, not in the other direction.</li></ol>
<p><strong>One main benefit of this workflow is that it does not require most contributors to have write permissions to the main repository.</strong> Only those who are merging PRs need write permissions.
The main drawback of this workflow is the extra overhead of sending everything through forks.</p>
<p><strong>You can follow the steps in the simulation of a forking workflow given below</strong> to learn how to follow such a workflow.</p>
<p><span><span aria-hidden="true" class="fas fa-info-circle"></span></span> This activity is best done as a team.</p>
<p><strong>Step 1. One member: set up the team org and the team repo.</strong></p>
<ul style="list-style-type: none; padding-inline-start: 0px;">
<li texts="['1.1)', '1.2)', '1.3)', '1.4)', '1.5)']" style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">1.1)</span><div>
<p><a href="https://help.github.com/articles/creating-a-new-organization-from-scratch/"><strong>Create a GitHub organization</strong></a> for your team, if you don't have one already.  The org name is up to you. We'll refer to this organization as <em>team org</em> from now on.</p></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">1.2)</span><div>
<p><a href="https://help.github.com/enterprise/2.10/admin/guides/user-management/creating-teams/"><strong>Add a team</strong></a> called <code class="hljs inline no-lang" v-pre>developers</code> to your team org.</p></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">1.3)</span><div>
<p><a href="https://help.github.com/enterprise/2.0/admin/guides/user-management/adding-or-inviting-people-to-teams/"><strong>Add team members</strong></a> to the <code class="hljs inline no-lang" v-pre>developers</code> team.</p></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">1.4)</span><div>
<p><strong>Fork</strong> <a href="https://github.com/se-edu/samplerepo-workflow-practice">se-edu/samplerepo-workflow-practice</a> to your team org. We'll refer to this as the <em>team repo</em>.</p></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">1.5)</span><div>
<p><strong><a href="https://help.github.com/articles/managing-team-access-to-an-organization-repository/">Add the forked repo</a> to the <code class="hljs inline no-lang" v-pre>developers</code> team.</strong> Give write access.</p></div></li></ul>
<p><strong>Step 2. Each team member: create PRs via own fork.</strong></p>
<ul style="list-style-type: none; padding-inline-start: 0px;">
<li texts="['2.1)', '2.2)', '2.3)', '2.4)', '2.5)']" style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">2.1)</span><div>
<p><strong>Fork that repo</strong> from your team org to your own GitHub account.</p></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">2.2)</span><div>
<p><strong>Create a branch</strong> named <code class="hljs inline no-lang" v-pre>add-{your name}-info</code> (e.g. <code class="hljs inline no-lang" v-pre>add-johnTan-info</code>) in the local repo.</p></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">2.3)</span><div>
<p><strong>Add a file</strong> <code class="hljs inline no-lang" v-pre>yourName.md</code> into the <code class="hljs inline no-lang" v-pre>members</code> directory (e.g., <code class="hljs inline no-lang" v-pre>members/johnTan.md</code>) containing some info about you into that branch.</p></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">2.4)</span><div>
<p><strong>Push that branch to your fork</strong>.</p></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">2.5)</span><div>
<p><strong>Create a PR</strong> from that branch to the <code class="hljs inline no-lang" v-pre>master</code> branch of the team repo.</p></div></li></ul>
<p><strong>Step 3. For each PR: review, update, and merge.</strong></p>
<ul style="list-style-type: none; padding-inline-start: 0px;">
<li texts="['3.1)', '3.2)', '3.3)', '3.4)', '3.5)']" style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">3.1)</span><div>
<p><strong>[A team member (not the PR author)] Review the PR</strong> by adding comments (can be just dummy comments).</p></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">3.2)</span><div>
<p><strong>[PR author] Update the PR</strong> by pushing more commits to it, to simulate updating the PR based on review comments.</p></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">3.3)</span><div>
<p><strong>[Another team member] Approve and merge</strong> the PR using the GitHub interface.</p></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">3.4)</span><div>
<p><strong>[All members]</strong> <a href="https://help.github.com/articles/syncing-a-fork/"><strong>Sync your local repo (and your fork)</strong> with upstream repo</a>. In this case, your <em>upstream repo</em> is the repo in your team org.</p>
<ul>
<li>The basic mechanism for this has two steps (which you can do using Git CLI or any Git GUI):<br>
(1) First, pull from the upstream repo -- this will update your clone with the latest code from the upstream repo.<br>
If there are any unmerged branches in your local repo, you can update them too e.g., you can merge the new <code class="hljs inline no-lang" v-pre>master</code> branch to each of them.<br>
(2) Then, push the updated branches to your fork. This will also update any PRs from your fork to the upstream repo.</li>
<li>Some alternatives mechanisms to achieve the same can be found in <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/syncing-a-fork">this GitHub help page</a>.<br>
If you are new to Git, we recommend that you use the above two-step mechanism instead, so that you get a better view of what's actually happening behind the scene.</li></ul></div></li></ul>
<p><strong>Step 4. Create conflicting PRs.</strong></p>
<ul style="list-style-type: none; padding-inline-start: 0px;">
<li texts="['4.1)', '4.2)', '4.3)', '4.4)', '4.5)']" style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">4.1)</span><div>
<p><strong>[One member]: Update README:</strong> In the <code class="hljs inline no-lang" v-pre>master</code> branch, remove John Doe and Jane Doe from the <code class="hljs inline no-lang" v-pre>README.md</code>, commit, and push to the main repo.</p></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">4.2)</span><div>
<p><strong>[Each team member] Create a PR</strong> to add yourself under the <code class="hljs inline no-lang" v-pre>Team Members</code> section in the <code class="hljs inline no-lang" v-pre>README.md</code>. Use a new branch for the PR e.g., <code class="hljs inline no-lang" v-pre>add-johnTan-name</code>.</p></div></li></ul>
<p><strong>Step 5. Merge conflicting PRs</strong> one at a time. Before merging a PR, you’ll have to resolve conflicts.</p>
<ul style="list-style-type: none; padding-inline-start: 0px;">
<li texts="['5.1)', '5.2)', '5.3)', '5.4)', '5.5)']" style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">5.1)</span><div>
<p>[Optional] A member can inform the PR author (by posting a comment) that there is a conflict in the PR.</p></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">5.2)</span><div>
<p><strong>[PR author] Resolve the conflict locally</strong>:</p>
<ol>
<li>Pull the <code class="hljs inline no-lang" v-pre>master</code> branch from the repo in your team org.</li>
<li>Merge the pulled <code class="hljs inline no-lang" v-pre>master</code> branch to your PR branch.</li>
<li>Resolve the merge conflict that crops up during the merge.</li>
<li>Push the updated PR branch to your fork.</li></ol></div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">5.3)</span><div>
<p><strong>[Another member or the PR author]: Merge the de-conflicted PR</strong>: When GitHub does not indicate a conflict anymore, you can go ahead and merge the PR.</p></div></li></ul></div>
<div>
<div><br>
<h5 id="resources"><span><span aria-hidden="true" class="fas fa-paperclip"></span></span> Resources:<a class="fa fa-anchor" href="#resources" onclick="event.stopPropagation()"></a></h5>
<div><ul>
<li><a href="https://www.atlassian.com/git/tutorials/comparing-workflows#forking-workflow">A detailed explanation of the Forking Workflow</a> - From Atlassian</li></ul></div></div></div></div></div>