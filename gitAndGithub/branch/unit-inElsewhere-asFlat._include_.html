<p><span class="dimmed"><strong><span>Tools → Git and GitHub →
</span></strong></span></p>
<div id="title-and-body">
<div><h4 id="t6l1-creating-branches"><span>T6L1. Creating Branches</span><a class="fa fa-anchor" href="#t6l1-creating-branches" onclick="event.stopPropagation()"></a></h4></div>
<div id="main">
<div>
<div class="non-printable">
<div class="border border-success pt-0 ps-1 pb-1 pe-1 border-bottom-0 rounded-top" style="background-color: #e6fff2">
<div class="indented">
<br>
<div id="overview">
<p><strong>To work in parallel timelines, you can use Git <em>branches</em>.</strong></p></div>
<span><small>This lesson covers that part.</small></span></div></div>
<br></div>
<p><strong>Git <span class="badge text-dark" style="background-color: rgba(13, 202, 240, 0.2);"><span class="large">branches</span></span> let you develop multiple versions of your work in parallel — effectively creating <span class="badge text-dark" style="background-color: rgba(13, 202, 240, 0.2);"><span class="large">diverged</span></span> timelines of your repository’s history.</strong> For example, one team member can create a new branch to experiment with a change, while the rest of the team continues working on another branch. Branches can have meaningful names, such as <code class="hljs inline no-lang" v-pre>master</code>, <code class="hljs inline no-lang" v-pre>release</code>, or <code class="hljs inline no-lang" v-pre>draft</code>.</p>
<p><strong>A Git branch is simply a ref (a named label) that points to a commit and automatically moves forward as you add new commits to that branch.</strong> As you’ve seen before, the <code class="hljs inline no-lang" v-pre>HEAD</code> ref indicates which branch you’re currently working on, by pointing to corresponding branch ref.<br>
<strong>When you add a commit, it goes into the branch you are currently on</strong>, and the branch ref (together with the <code class="hljs inline no-lang" v-pre>HEAD</code> ref) moves to the new commit.</p>
<p><strong>Git creates a branch named <code class="hljs inline no-lang" v-pre>master</code> by default</strong> (Git can be configured to use a different name e.g., <code class="hljs inline no-lang" v-pre>main</code>).</p>
<p>Given below is an illustration of how branch refs move as branches evolve. Refer to the text below it for explanations of each stage.</p>
<annotate src="/se-book/gitAndGithub/branch/images/branchesAsLabels1.png" width="700">
<a-point x="2%" y="27%" opacity="0"><template #label><p>[1]</p></template></a-point>
<a-point x="2%" y="47%" opacity="0"><template #label><p>[2]</p></template></a-point>
<a-point x="35%" y="25%" opacity="0"><template #label><p>[3]</p></template></a-point>
<a-point x="65%" y="10%" opacity="0"><template #label><p>[4]</p></template></a-point>
<a-point x="85%" y="10%" opacity="0"><template #label><p>[5]</p></template></a-point></annotate>
<p></p>
<ul style="list-style-type: none; padding-inline-start: 0px;">
<li texts="['[1]', '[2]', '[3]', '[4]', '[5]']" style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">[1]</span><div>There is only one branch (i.e., <code class="hljs inline no-lang" v-pre>master</code>) and there is only one commit on it. The <code class="hljs inline no-lang" v-pre>HEAD</code> ref is pointing to the <code class="hljs inline no-lang" v-pre>master</code> branch (as we are currently on that branch).</div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">[2]</span><div>A new commit has been added. The <code class="hljs inline no-lang" v-pre>master</code> and the <code class="hljs inline no-lang" v-pre>HEAD</code> refs have moved to the new commit.</div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">[3]</span><div>A new branch <code class="hljs inline no-lang" v-pre>fix1</code> has been added. The repo has switched to the new branch too (hence, the <code class="hljs inline no-lang" v-pre>HEAD</code> ref is attached to the <code class="hljs inline no-lang" v-pre>fix1</code> branch).</div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">[4]</span><div>A new commit (<code class="hljs inline no-lang" v-pre>c</code>) has been added. The current branch ref <code class="hljs inline no-lang" v-pre>fix1</code> moves to the new commit, together with the <code class="hljs inline no-lang" v-pre>HEAD</code> ref.</div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">[5]</span><div>The repo has switched back to the <code class="hljs inline no-lang" v-pre>master</code> branch. Hence, the <code class="hljs inline no-lang" v-pre>HEAD</code> has moved back to <code class="hljs inline no-lang" v-pre>master</code> branch's <tooltip><template #content>latest commit of that branch</template>tip</tooltip>.<br>
At this point, the repo's working directory reflects the code at commit <code class="hljs inline no-lang" v-pre>b</code> (not <code class="hljs inline no-lang" v-pre>c</code>).</div></li></ul>
<annotate src="/se-book/gitAndGithub/branch/images/branchesAsLabels2.png" width="400">
<a-point x="15%" y="10%" opacity="0"><template #label><p>[6]</p></template></a-point>
<a-point x="50%" y="5%" opacity="0"><template #label><p>[7]</p></template></a-point></annotate>
<ul style="list-style-type: none; padding-inline-start: 0px;">
<li texts="['[6]', '[7]']" style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">[6]</span><div>A new commit (<code class="hljs inline no-lang" v-pre>d</code>) has been added. The <code class="hljs inline no-lang" v-pre>master</code> and the <code class="hljs inline no-lang" v-pre>HEAD</code> refs have moved to that commit.</div></li>
<li style="display: flex;"><span aria-hidden="true" style="line-height: unset; margin-inline-end: 0.35em; align-self: flex-start; flex-shrink: 0;">[7]</span><div>The repo has switched back to the <code class="hljs inline no-lang" v-pre>fix1</code> branch and added a new commit (<code class="hljs inline no-lang" v-pre>e</code>) to it.</div></li></ul>
<box type="warning" seamless>
<p>Note that appearance of the revision graph (colors, positioning, orientation etc.) varies based on the Git client you use, and might not match the exact diagrams given above.</p></box>

<div class="non-printable">
<span style="position: relative; top: 10px; background-color: rgba(255, 0, 0, 0.2);" class="badge rounded-pill text-dark fs-6"><span><span aria-hidden="true" class="fas fa-laptop-code"></span></span> HANDS-ON: Work on parallel branches</span>
<div class="indented-level1">
<box type="important" seamless no-icon>
<p><span style="position: relative; right: 12px; background-color: rgba(255, 0, 0, 0.2); border-radius: 0 0.7em 0.7em 0" class="ps-3 pe-3 pb-1 pt-1 text-dark text-dark"><small><strong>1</strong></small></span> <strong>Fork the <a href="https://github.com/se-edu/samplerepo-things">samplerepo-things</a> repo, and clone it</strong> onto your computer.</p>
<p><span style="position: relative; right: 12px; background-color: rgba(255, 0, 0, 0.2); border-radius: 0 0.7em 0.7em 0" class="ps-3 pe-3 pb-1 pt-1 text-dark text-dark"><small><strong>2</strong></small></span> <strong>Observe that you are in the branch called <code class="hljs inline no-lang" v-pre>master</code>.</strong></p>
<tabs>
  <tab><template #header>CLI</template>
 
<pre><code class="no-line-numbers hljs bash" v-pre><span>$ git status
</span></code></pre><div class="d-flex">
<div class="me-3">
<span><span><strong><span class="dimmed">⤷</span></strong></span></span></div>
<div class="flex-grow-1">
<pre><code class="no-line-numbers hljs bash" v-pre><span>on branch master
</span></code></pre></div></div></tab>
  <tab class="d-print-none"><template #header>Sourcetree</template>
<pic eager src="/se-book/gitAndGithub/branch/images/onMasterBranch.png" height="120"></pic>
<p></p></tab></tabs>

<p><span style="position: relative; right: 12px; background-color: rgba(255, 0, 0, 0.2); border-radius: 0 0.7em 0.7em 0" class="ps-3 pe-3 pb-1 pt-1 text-dark text-dark"><small><strong>3</strong></small></span> <strong>Start a branch named <code class="hljs inline no-lang" v-pre>feature1</code> and switch to the new branch.</strong></p>
<tabs>
  <tab><template #header>CLI</template>
 
<p>You can use the <code class="hljs inline no-lang" v-pre>branch</code> command to create a new branch and the <code class="hljs inline no-lang" v-pre>checkout</code> command to switch to a specific branch.</p>
<pre><code class="no-line-numbers hljs bash" v-pre><span>$ git branch feature1
</span><span>$ git checkout feature1
</span></code></pre><p>One-step shortcut to create a branch and switch to it at the same time:</p>
<pre><code class="no-line-numbers hljs bash" v-pre><span>$ git checkout –b feature1
</span></code></pre><box type="info" seamless><template #header><p>The new <code class="hljs inline no-lang" v-pre>switch</code> command</p></template>
<p>Git recently introduced a <a href="https://git-scm.com/docs/git-switch"><code class="hljs inline no-lang" v-pre>switch</code> command</a> that you can use instead of the <code class="hljs inline no-lang" v-pre>checkout</code> command given above.</p>
<p>To create a new branch and switch to it:</p>
<pre><code class="no-line-numbers hljs bash" v-pre><span>$ git branch feature1
</span><span><span>$ git <span class="highlighted">switch</span> feature1
</span></span></code></pre><p>One-step shortcut (by using <code class="hljs inline no-lang" v-pre>-c</code> or <code class="hljs inline no-lang" v-pre>--create</code> switch):</p>
<pre><code class="no-line-numbers hljs bash" v-pre><span><span>$ git <span class="highlighted">switch –c</span> feature1
</span></span></code></pre></box></tab>
  <tab class="d-print-none"><template #header>Sourcetree</template>
<p>Click on the <code class="hljs inline no-lang" v-pre>Branch</code> button on the main menu. In the next dialog, enter the branch name and click <code class="hljs inline no-lang" v-pre>Create Branch</code>.</p>
<pic eager src="/se-book/gitAndGithub/branch/images/sourcetreeCreateBranch.png" height="150"></pic>
<p></p>
<p>Note how the <code class="hljs inline no-lang" v-pre>feature1</code> is indicated as the current branch (reason: Sourcetree automatically switches to the new branch when you create a new branch, if the <code class="hljs inline no-lang" v-pre>Checkout New Branch</code> was selected in the previous dialog).</p>
<pic eager src="/se-book/gitAndGithub/branch/images/sourcetreeFeature1BranchActive.png" height="150"></pic>
<p></p></tab></tabs>

<p><span style="position: relative; right: 12px; background-color: rgba(255, 0, 0, 0.2); border-radius: 0 0.7em 0.7em 0" class="ps-3 pe-3 pb-1 pt-1 text-dark text-dark"><small><strong>4</strong></small></span> <strong>Create some commits in the new branch.</strong> <span class="dimmed">Just commit as per normal. Commits you add while on a certain branch will become part of that branch.</span><br>
Note how the <code class="hljs inline no-lang" v-pre>master</code> ref and the <code class="hljs inline no-lang" v-pre>HEAD</code> ref moves to the new commit.</p>
<tabs>
  <tab><template #header>CLI</template>
 
<p>As before, you can use the <code class="hljs inline no-lang" v-pre>git log --one-line --decorate</code> command for this.</p></tab>
  <tab class="d-print-none"><template #header>Sourcetree</template>
<ul>
<li>
<p><span aria-hidden="true" class="fab fa-windows"></span> At times, the <code class="hljs inline no-lang" v-pre>HEAD</code> ref of the local repo is represented as <span aria-hidden="true" class="fas fa-dot-circle"></span> in Sourcetree, as illustrated in the screenshot below
<pic eager src="/se-book/gitAndGithub/branch/images/sourcetree_HEAD_dot.png"></pic>.</p></li>
<li>
<p><span aria-hidden="true" class="fab fa-apple"></span> The <code class="hljs inline no-lang" v-pre>HEAD</code> ref is not shown in the UI if it is already pointing at the active branch.</p></li></ul></tab></tabs>

<p><span style="position: relative; right: 12px; background-color: rgba(255, 0, 0, 0.2); border-radius: 0 0.7em 0.7em 0" class="ps-3 pe-3 pb-1 pt-1 text-dark text-dark"><small><strong>5</strong></small></span> <strong>Switch to the <code class="hljs inline no-lang" v-pre>master</code> branch.</strong> Note how the changes you did in the <code class="hljs inline no-lang" v-pre>feature1</code> branch are no longer in the working directory.</p>
<tabs>
  <tab><template #header>CLI</template>
 
<pre><code class="no-line-numbers hljs bash" v-pre><span>$ git switch master
</span></code></pre></tab>
  <tab class="d-print-none"><template #header>Sourcetree</template>
<p>Double-click the <code class="hljs inline no-lang" v-pre>master</code> branch.</p>
<pic eager src="/se-book/gitAndGithub/branch/images/sourcetreeMasterBranchSelected.png" height="150"></pic>
<p></p>
<box type="info" seamless><template #header><p>Revisiting <code class="hljs inline no-lang" v-pre>master</code> vs <code class="hljs inline no-lang" v-pre>origin/master</code></p></template>
<p>In the screenshot above, you see a <code class="hljs inline no-lang" v-pre>master</code> ref and a <code class="hljs inline no-lang" v-pre>origin/master</code> ref for the same commit. The former identifies the <tooltip><template #content>i.e., the most recent commit on the branch</template>tip</tooltip> of the local <code class="hljs inline no-lang" v-pre>master</code> branch while the latter identifies the tip of the <code class="hljs inline no-lang" v-pre>master</code> branch at the remote repo named <code class="hljs inline no-lang" v-pre>origin</code>. The fact that both refs point to the same commit means the local <code class="hljs inline no-lang" v-pre>master</code> branch and its remote counterpart are <tooltip><template #content>neither one has commits the other one doesn't</template>in sync</tooltip> with each other.
Similarly, <code class="hljs inline no-lang" v-pre>origin/HEAD</code> ref appearing against the same commit indicates that <tooltip><template #content><code class="hljs inline no-lang" v-pre>HEAD</code> ref indicates the currently checked-out branch's latest commit</template>the <code class="hljs inline no-lang" v-pre>HEAD</code> ref</tooltip> of the remote repo is pointing to this commit as well.</p></box></tab></tabs>

<p><span style="position: relative; right: 12px; background-color: rgba(255, 0, 0, 0.2); border-radius: 0 0.7em 0.7em 0" class="ps-3 pe-3 pb-1 pt-1 text-dark text-dark"><small><strong>6</strong></small></span> <strong>Add a commit to the master branch.</strong> Let’s imagine it’s a bug fix.<br>
To keep things simple for the time being, this commit should <mark>not involve the same content that you changed in the <code class="hljs inline no-lang" v-pre>feature1</code> branch</mark>. To be on the safe side, you can change an entirely different file in this commit.</p>
<div id="samplerepo-things-before-merging">
<pre class="mermaid">
gitGraph BT:
    %%{init: { 'theme': 'default', 'gitGraph': {'mainBranchName': 'master'}} }%%
    commit id: "m1"
    commit id: "m2"
    branch feature1
    commit id: "f1"
    commit id: "[feature] f2"
    checkout master
    commit id: "[HEAD → master] m3"
    checkout feature1
</pre></div>
<p><span style="position: relative; right: 12px; background-color: rgba(255, 0, 0, 0.2); border-radius: 0 0.7em 0.7em 0" class="ps-3 pe-3 pb-1 pt-1 text-dark text-dark"><small><strong>7</strong></small></span> <strong>Switch between the two branches and see how the working directory changes accordingly.</strong> That is, now you have two parallel timelines that you can freely switch between.</p>
<p><span style="position: relative; right: 12px; background-color: rgba(255, 0, 0, 0.2); border-radius: 0 0.7em 0.7em 0" class="ps-3 pe-3 pb-1 pt-1 text-dark text-dark"><small><strong><span aria-hidden="true" class="far fa-square-check"></span> done!</strong></small></span></p></box></div></div>

<p><strong>You can also start a branch from an earlier commit</strong>, instead of the latest commit in the current branch. For that, simply check out the commit you wish to start from.</p>

<div class="non-printable">
<span style="position: relative; top: 10px; background-color: rgba(255, 0, 0, 0.2);" class="badge rounded-pill text-dark fs-6"><span><span aria-hidden="true" class="fas fa-laptop-code"></span></span> HANDS-ON: Start a branch from an earlier commit</span>
<div class="indented-level1">
<box type="important" seamless no-icon>
<p>In the <code class="hljs inline no-lang" v-pre>samplerepo-things</code> repo that you used above, let's create a new branch that starts from the same commit the <code class="hljs inline no-lang" v-pre>feature1</code> branch started from. Let's pretend this branch will contain an alternative version of the content we added in the <code class="hljs inline no-lang" v-pre>feature1</code> branch.</p>
<pre class="mermaid">
gitGraph BT:
    %%{init: { 'theme': 'default', 'gitGraph': {'mainBranchName': 'master'}} }%%
    commit id: "m1"
    commit id: "m2"
    branch feature1
    branch feature1-alt
    checkout feature1
    commit id: "f1"
    commit id: "[feature1] f2"
    checkout master
    commit id: "[HEAD → master] m3"
    checkout feature1-alt
    commit id: "[HEAD → feature1-alt] a1"
</pre>
<box type="wrong" seamless>
<p><strong class="text-danger">Avoid this rookie mistake!</strong></p>
<p><mark>Always remember to switch back to the <code class="hljs inline no-lang" v-pre>master</code> branch before creating a new branch.</mark> If not, your new branch will be created on top of the current branch.</p></box>
<ol>
<li>Switch to the <code class="hljs inline no-lang" v-pre>master</code> branch.</li>
<li>Checkout the commit that is at which the <code class="hljs inline no-lang" v-pre>feature1</code> branch diverged from the <code class="hljs inline no-lang" v-pre>master</code> branch (e.g. <code class="hljs inline no-lang" v-pre>git checkout HEAD~1</code>). This will create a detached <code class="hljs inline no-lang" v-pre>HEAD</code>.</li>
<li>Create a new branch called <code class="hljs inline no-lang" v-pre>feature1-alt</code>. The <code class="hljs inline no-lang" v-pre>HEAD</code> will now point to this new branch (i.e., no longer 'detached').</li>
<li>Add a commit on the new branch.</li></ol>
<p><span style="position: relative; right: 12px; background-color: rgba(255, 0, 0, 0.2); border-radius: 0 0.7em 0.7em 0" class="ps-3 pe-3 pb-1 pt-1 text-dark text-dark"><small><strong><span aria-hidden="true" class="far fa-square-check"></span> done!</strong></small></span></p></box></div></div>
</div>
<div>
</div></div></div>