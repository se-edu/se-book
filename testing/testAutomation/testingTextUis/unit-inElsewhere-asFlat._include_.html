<div></div>
<p></p>
<p><span class="dimmed"><strong><span>Quality Assurance â†’ Testing â†’ Test Automation â†’
</span></strong>
  </span>
</p>
<div id="title-and-body">
  <div>
    <h4 id="automated-testing-of-cli-apps">Automated Testing of CLI Apps</h4>
  </div>
  <div id="main">
    <div>
      <p><strong>A simple way to semi-automate testing of a CLI(Command Line Interface) app is by using input/output re-direction.</strong></p>
      <ul>
        <li>First, we feed the app with a sequence of test inputs that is stored in a file while redirecting the output to another file.</li>
        <li>Next, we compare the actual output file with another file containing the expected output.</li>
      </ul>
      <p>Let us assume we are testing a CLI app called <code>AddressBook</code>. Here are the detailed steps:</p>
      <ol>
        <li>
          <p>Store the test input in the text file <code>input.txt</code>.</p>
          <panel header="%%<span class='fas fa-cube'></span> Example `input.txt`%%" type="seamless">
            <pre class="hljs"><code>add Valid Name p/12345 valid@email.butNoPrefix
add Valid Name 12345 e/valid@email.butPhonePrefixMissing
</code></pre>
          </panel>
        </li>
        <li>
          <p>Store the output we expect from the SUT in another text file <code>expected.txt</code>.</p>
          <panel header="%%<span class='fas fa-cube'></span> Example `expected.txt`%%" type="seamless">
            <pre class="hljs"><code>Command: || [add Valid Name p/12345 valid@email.butNoPrefix]
Invalid command format: add 

Command: || [add Valid Name 12345 e/valid@email.butPhonePrefixMissing]
Invalid command format: add 
</code></pre>
          </panel>
        </li>
        <li>
          <p>Run the program as given below, which will redirect the text in <code>input.txt</code> as the input to <code>AddressBook</code> and similarly, will redirect the output of AddressBook to a text file <code>output.txt</code>. <span class="dimmed">Note that this does not require any code changes to <code>AddressBook</code>.</span></p>
          <pre><code class="hljs sh">java AddressBook &lt; input.txt &gt; output.txt
</code></pre>
          <ul>
            <li>
              <p>ðŸ’¡ The way to run a CLI program differs based on the language.<br> e.g., In Python, assuming the code is in <code>AddressBook.py</code> file, use the command<br>
                <code>python AddressBook.py &lt; input.txt &gt; output.txt</code></p>
            </li>
            <li>
              <p>ðŸ’¡ If you are using Windows, use a normal command window to run the app, not a Power Shell window.</p>
            </li>
          </ul>
          <panel header="" minimized="">
            <span slot="header" class="card-title"><span>More on the <code>&gt;</code> operator and the <code>&lt;</code> operator. <span class="badge badge-pill badge-secondary">tangential</span></span>
            </span>
            <p>A CLI program takes input from the keyboard and outputs to the console. That is because those two are default input and output streams, respectively. But you can change that behavior using <code>&lt;</code> and <code>&gt;</code> operators.
              For example, if you run <code>AddressBook</code> in a command window, the output will be shown in the console, but if you run it like this,</p>
            <pre><code class="hljs sh">java AddressBook &gt; output.txt 
</code></pre>
            <p>the Operating System then creates a file <code>output.txt</code> and stores the output in that file instead of displaying it in the console. No file I/O coding is required. Similarly, adding <code>&lt; input.txt</code> (or any other filename)
              makes the OS redirect the contents of the file as input to the program, as if the user typed the content of the file one line at a time.</p>
            <tip-box>
              <p><span class="fas fa-paperclip"></span> Resources:</p>
              <ul>
                <li><a href="http://technet.microsoft.com/en-us/library/bb490982.aspx">Using command redirection operators in Windows</a></li>
              </ul>
            </tip-box>
            <p></p>
          </panel>
          <p></p>
        </li>
        <li>
          <p>Next, we compare <code>output.txt</code> with the <code>expected.txt</code>. This can be done using a utility such as Windows <code>FC</code> (i.e. File Compare) command, Unix <code>diff</code> command, or a GUI tool such as <em>WinMerge</em>.</p>
          <pre class="hljs"><code>FC output.txt expected.txt
</code></pre>
        </li>
      </ol>
      <p>Note that the above technique is only suitable when testing CLI apps, and only if the exact output can be predetermined. <span class="dimmed">If the output varies from one run to the other (e.g. it contains a time stamp), this technique will not work. In those cases we need more sophisticated ways of automating tests.</span></p>
      <div>
        <popover id="pop:cli" placement="top">
          <div slot="content">
            <div>
              <p><strong>CLI App</strong>: An application that has a <em>Command Line Interface</em>. i.e. user interacts with the app by typing in commands.</p>
            </div>
          </div>
        </popover>
      </div>
    </div>
    <div></div>
  </div>
</div>